{% extends "accounts/base_seller.html" %}

{% block title %}Edit {{ product.name }} — DZSTORE{% endblock %}

{% block header_actions %}
    <a href="{% url 'seller_products' %}" class="btn btn-ghost">← My products</a>
{% endblock %}

{% block content_inner %}
    <h2 class="page-title">Edit product</h2>
    <p class="page-desc">{{ product.name }}</p>

    <div class="card" style="max-width: 560px;">
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="id_name">{{ form.name.label }}</label>
                {{ form.name }}
                {{ form.name.errors }}
            </div>
            <div class="form-group">
                <label for="id_description">{{ form.description.label }}</label>
                {{ form.description }}
                {{ form.description.errors }}
            </div>
            <div class="form-group">
                <label for="id_image">{{ form.image.label }}</label>
                {{ form.image }}
                {{ form.image.errors }}
            </div>
            <div class="form-group">
                <label for="id_quantity">{{ form.quantity.label }}</label>
                {{ form.quantity }}
                {{ form.quantity.errors }}
            </div>
            <div class="form-group">
                <label for="id_price">{{ form.price.label }}</label>
                {{ form.price }}
                {{ form.price.errors }}
            </div>
            <div class="form-group">
                <label for="id_category">{{ form.category.label }}</label>
                {{ form.category }}
                {{ form.category.errors }}
            </div>
            <button type="submit" class="btn btn-primary">Update product</button>
        </form>
    </div>

    <div class="card" style="max-width: 560px; margin-top: 1.5rem; border-color: #dc3545;">
        <h3 style="margin-top: 0; color: #dc3545;">Danger zone</h3>
        <p>Permanently remove this product. This action cannot be undone.</p>
        <form id="delete-product-form" method="post" action="{% url 'seller_product_delete' product.id %}">
            {% csrf_token %}
            <button type="button" class="btn" id="delete-product-btn" style="background: #dc3545; color: white; border: none;">
                Delete product
            </button>
        </form>
    </div>

    <script>
        document.getElementById('delete-product-btn').addEventListener('click', function () {
            if (confirm('Are you sure you want to delete this product? This action cannot be undone.')) {
                document.getElementById('delete-product-form').submit();
            }
        });
    </script>
{% endblock %}
